<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="view_account_move_form_real" model="ir.ui.view">
        <field name="name">account.move.form.real</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form" />
        <field name="arch" type="xml">
            <xpath expr="//field[@widget='res_partner_many2one']" position="attributes">
                <attribute
                    name="domain"
                >['|',('company_id','=',False),('company_id', '=', company_id),('is_company', '=', True)]</attribute>
            </xpath>
            <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='name']" position="after">
                <field name="freight_cost" groups="base.group_no_one" />
                <field name="price_unit_without_freight" groups="base.group_no_one" />
            </xpath>
            <xpath expr="//field[@name='purchase_vendor_bill_id']" position="after">
                <field string="Don't pay this invoice" name="stop_inv" invisible="move_type == 'out_invoice'" />
            </xpath>
            <xpath expr="//field[@name='line_ids']/tree/field[@name='name']" position="after">
                <field name="freight_cost" column_invisible="True" />
            </xpath>
            <xpath expr="//field[@name='payment_reference']" position="before">
                <field name="way_of_shipment_id" />
                <field name="child_tag_ids" invisible="1" />
            </xpath>
            <xpath expr="//field[@name='payment_reference']" position="attributes">
                <attribute
                    name="invisible"
                >move_type not in ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt')</attribute>
                <attribute name="readonly">state != 'draft'</attribute>
                <attribute name="required">move_type == 'in_invoice'</attribute>
            </xpath>
            <xpath expr="//field[@name='partner_id']" position="attributes">
                <attribute
                    name="domain"
                >['|',('company_id','=',False),('company_id', '=', company_id),('is_company', '=', True)]</attribute>
            </xpath>
            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="is_freight_supplier" invisible="1" />
                <label
                    string="Freight destination"
                    for="state_id"
                    invisible="move_type != 'in_invoice' or not is_freight_supplier"
                />
                <div class="row" invisible="move_type != 'in_invoice' or not is_freight_supplier">
                    <div class="col-5">
                        <field
                            name="state_id"
                            placeholder="Destination state"
                            domain="[('country_id.code', '=', 'MX')]"
                        />
                    </div>
                    <div class="col-7 offset-0">
                        <field name="city_id" placeholder="Destination city" domain="[('state_id', '=', state_id)]" />
                    </div>
                </div>
            </xpath>
            <xpath expr="//button[@name='action_reverse']" position="attributes">
                <attribute name="invisible">move_type not in 'in_invoice' or state != 'posted'</attribute>
            </xpath>
            <xpath expr="//button[@name='button_draft']" position="attributes">
                <attribute name="groups">real.res_groups_can_see_button_draft_account_move</attribute>
                <attribute name="confirm">Do you want to RESET TO DRAFT this account move?</attribute>
            </xpath>
            <!-- <xpath expr="//button[@name='button_cancel_posted_moves']" position="attributes">
                <attribute name="confirm">Do you want to REQUEST EDI CANCELLATION of this acount move?</attribute>
            </xpath> -->
            <xpath expr="//button[@name='button_cancel']" position="attributes">
                <attribute name="confirm">Do you want to CANCEL this account move?</attribute>
            </xpath>
            <xpath expr="//group[@id='header_right_group']/field[@name='date']" position="attributes">
                <attribute
                    name="invisible"
                >move_type in ('out_invoice', 'out_refund', 'out_receipt', 'in_invoice', 'in_refund', 'in_receipt')</attribute>
                <attribute name="readonly">state != 'draft'</attribute>
            </xpath>
            <xpath expr="//field[@name='ref' and @nolabel='1']" position="attributes">
                <attribute name="invisible">move_type not in ('in_invoice', 'in_receipt', 'in_refund')</attribute>
                <attribute name="required">move_type in ('in_invoice', 'in_refund', 'in_receipt')</attribute>
            </xpath>
            <xpath expr="//form[1]/sheet[1]/notebook[1]" position="after">
                <group>
                    <group>
                        <field name="x_studio_tarimas" string="Tarimas" help="NÃºmero de Tarimas" />
                    </group>
                </group>
            </xpath>
        </field>
    </record>
    <record id="view_account_move_sale_form_real" model="ir.ui.view">
        <field name="name">account.move.sale.form.real</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="sale.account_invoice_form" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='partner_shipping_id']" position="attributes">
                <attribute name="domain">[('id', 'in', child_tag_ids)]</attribute>
            </xpath>
        </field>
    </record>
    <record id="account_move_search" model="ir.ui.view">
        <field name="name">account.move.search</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_account_invoice_filter" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="after">
                <field name="l10n_mx_edi_cfdi_uuid" />
	    	<field name="way_of_shipment_id" />
            </xpath>
            <xpath expr="//filter[@name='to_check']" position="before">
                <filter name="is_expense" string="it is an expense" />
                <filter name="not_expense" string="it is not an expense" />
            </xpath>
        </field>
    </record>
    <record model="ir.ui.view" id="account_move_invoice_tree">
        <field name="name">account_move_invoice.tree</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_invoice_tree" />
        <field name="priority">1000</field>
        <field name="arch" type="xml">
            <!-- <xpath expr="//field[@name='invoice_date_due']" position="after">
                <field name="rectified_invoices" optional="show" string="Credit note reason" />
            </xpath> -->
            <xpath expr="//field[@name='name']" position="after">
                <field name="ref" string="Supplier Invoices" optional="show" />
            </xpath>
        </field>
    </record>
    <!-- <record id="view_mx_edi_advance_invoice_form_real" model="ir.ui.view">
        <field name="name">mx.edi.advance.invoice.form.real</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="l10n_mx_edi.view_l10n_mx_edi_invoice_form_inherit" />
        <field name="arch" type="xml">
            <xpath expr="//div[@class='alert alert-info']" position="attributes">
                <attribute name="attrs">
                    {
                        'invisible': [
                            '|',
                            '|',
                            '|',
                            ('l10n_mx_edi_has_outstanding_advances', '=', False),
                            ('state', 'not in', ('draft')),
                            ('l10n_mx_edi_is_advance', '=', True),
                            ('l10n_mx_edi_amount_advances', '&gt;', 0)
                        ]
                    }
                </attribute>
            </xpath>
        </field>
    </record> -->
</odoo>
