<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="real_stock_move_form" model="ir.ui.view">
        <field name="name">real.stock.move.line.form</field>
        <field name="model">stock.move.line</field>
        <field name="inherit_id" ref="stock.view_stock_move_line_detailed_operation_tree" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='quantity']" position="after">
                <field name="equipment_id" invisible="not equipment_id" />
            </xpath>
        </field>
    </record>
    <record id="view_stock_move_outgoing_products_real" model="ir.ui.view">
        <field name="name">view.stock.move.outgoing.products.real</field>
        <field name="model">stock.move</field>
        <field eval="100" name="priority" />
        <field name="arch" type="xml">
            <tree
                create="0"
                decoration-muted="state == 'cancel'"
                default_order="forecast_expected_date, picking_id, sequence"
            >
                <field name="date_deadline" optional="show" widget="date" />
                <field name="date" optional="hide" widget="date" />
                <!-- <field name="picking_partner_id" /> -->
                <field name="way_of_shipment_id" />
                <field name="picking_id" />
                <button icon="fa-arrow-right" name="action_view_picking" string="See Picking" type="object" />
                <field column_invisible="True" name="sequence" />
                <field name="sale_order_id" />
                <button icon="fa-arrow-right" name="action_view_sale" string="See Sale Order" type="object" />
                <field name="product_id" />
                <field name="parent_category_id" optional="show" />
                <field name="product_category_id" optional="hide" />
                <field name="product_uom_qty" string="Quantity" />
                <field
                    groups="uom.group_uom"
                    name="product_uom"
                    options="{'no_open': True, 'no_create': True}"
                    string="Unit of Measure"
                />
                <field name="tons_display" string="Tons" sum="Tons" />
                <field column_invisible="True" name="location_id" options="{'no_create': True}" />
                <field column_invisible="True" name="location_dest_id" />
                <field column_invisible="True" name="create_date" />
                <field name="state" optional="show" />
                <field column_invisible="True" name="company_id" />
                <field name="picking_note" optional="hide" />
            </tree>
        </field>
    </record>
    <!-- New Filters -->
    <record id="view_stock_move_real_filter" model="ir.ui.view">
        <field name="name">stock.move.real.filter</field>
        <field name="model">stock.move</field>
        <field name="inherit_id" ref="stock.view_move_search" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='product_id']" position="after">
                <field name="product_category_id" />
            </xpath>
            <xpath expr="//filter[@name='done']" position="after">
                <separator />
                <!-- <filter
                    domain="[('backorder_id','!=',False), ('state', 'not in', ['done', 'cancel'])]"
                    help="Show the pickings what are backorders"
                    name="see_backorders"
                    string="Pickings with BackOrders"
                /> -->
                <separator />
                <filter domain="[('parent_category_id','=','PT POLVOS')]" name="pt_polvos" string="PT POLVOS" />
                <separator />
                <filter
                    domain="[('parent_category_id','=','PT PINTURAS Y PASTAS')]"
                    name="pt_pyp"
                    string="PT PINTURAS Y PASTAS"
                />
                <filter
                    context="{'group_by': 'way_of_shipment_id'}"
                    domain="[]"
                    name="groupby_way_of_shipment_id"
                    string="Way of Shipment"
                />
                <filter
                    context="{'group_by': 'way_of_shipment_type_id'}"
                    domain="[]"
                    name="groupby_way_of_shipment_type_id"
                    string="Way of Shipment Type"
                />
                <filter
                    context="{'group_by': 'product_category_id'}"
                    domain="[]"
                    name="groupby_product_category_id"
                    string="Category"
                />
                <filter
                    context="{'group_by': 'parent_category_id'}"
                    domain="[]"
                    name="groupby_parent_category_id"
                    string="Parent Category"
                />
                <filter
                    context="{'group_by': 'salesman_id'}"
                    domain="[]"
                    name="groupby_salesman_id"
                    string="Salesman"
                />
            </xpath>
            <xpath expr="//filter[@name='future']" position="attributes">
                <attribute name="domain">[('state','not in',('done','cancel'))]</attribute>
            </xpath>
        </field>
    </record>
    <record id="action_outgoing_picking_move" model="ir.actions.act_window">
        <field name="name">Outgoing Products</field>
        <field name="res_model">stock.move</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'product_outgoing': True, 'search_default_future': True}</field>
        <field
            eval="[
            (5, 0, 0),
            (0, 0, {
                'view_mode': 'tree',
                'view_id': ref('real.view_stock_move_outgoing_products_real'),
            }),
            (0, 0, {
                'view_mode': 'kanban',
                'view_id': ref('stock.view_move_kandan'),
            }),
        ]"
            name="view_ids"
        />
        <field
            eval="[('picking_id.picking_type_id.code', '=', 'outgoing'), ('location_id.usage', '=', 'internal')]"
            name="domain"
        />
    </record>
    <record model="ir.ui.view" id="view_stock_move_tree">
        <field name="name">stock.move.tree</field>
        <field name="model">stock.move</field>
        <field name="inherit_id" ref="stock.view_move_tree" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='product_id']" position="after">
                <field name="parent_category_id" optional="show" />
                <field name="product_category_id" optional="hide" />
            </xpath>
        </field>
    </record>
    <record model="ir.ui.view" id="view_stock_move_line_tree">
        <field name="name">stock.move.line.tree</field>
        <field name="model">stock.move.line</field>
        <field name="inherit_id" ref="stock.view_move_line_tree" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='product_id']" position="after">
                <field name="parent_category_id" />
            </xpath>
        </field>
    </record>
    <menuitem
        action="real.action_outgoing_picking_move"
        id="menu_outgoing_products"
        name="Outgoing Products"
        parent="sale.product_menu_catalog"
    />
</odoo>
