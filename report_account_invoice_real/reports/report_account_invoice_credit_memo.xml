<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <template
        id="report_invoice_credit_memo_real_1"
        inherit_id="report_account_invoice_real.report_account_invoice_base_real"
        primary="True"
    />

    <template
        id="report_invoice_credit_memo_real_2"
        inherit_id="report_account_invoice_real.report_invoice_credit_memo_real_1"
        priority="1000"
    >
        <xpath expr="//strong[@name='invoice_title_type']" position="replace">
            <strong style="font-size:1rem;">A-036</strong><br />
            <strong
                name="invoice_title_type"
                style="font-size:0.90rem;border-bottom: 2px solid black;"
            >NOTA DE CREDITO</strong>
        </xpath>

        <xpath expr="//strong[@name='L-002']" position="replace" />

        <xpath expr="//span[@name='UUID_origin']" position="replace" />
        <xpath expr="//div[@name='header_right_col']/br[5]" position="replace" />


        <xpath expr="//span[@name='invoice_type']" position="replace">
            <span name="invoice_type">TIPO DE COMPROBANTE: EGRESO</span>
        </xpath>

        <xpath expr="//strong[@name='invoice_date_due']" position="replace" />

        <xpath expr="//div[@name='fiscal_information']" position="replace">
            <div name="client_information" class="col-6" style="font-size:0.90rem; margin-top:45px;">
                    <strong style="border-bottom: 2px solid black;">DATOS DEL CLIENTE</strong>
                    <span class="d-block">NOMBRE DEL CLIENTE: <b><t t-esc="o.partner_id.name" /></b></span>
                    <span class="d-block">NOMBRE DE LA SUCURSAL: <b><t t-esc="o.partner_shipping_id.name" /></b></span>
                    <span class="d-block">TIPO DE NOTA DE CRÃ‰DITO: <b><t t-esc="'falta'" /></b></span>
                    <span class="d-block">ASESOR DE VENTAS <b><t t-esc="o.invoice_user_id.name" /></b></span>
                    <span class="d-block">VIA DE EMBARQUE: <b><t t-esc="o.way_of_shipment_id.name" /></b></span>
                </div>
        </xpath>

        <xpath expr="//div[@name='delivery_information']" position="replace">
            <div name="delivery_information" class="col-6 d-grid" style="font-size:0.90rem; margin-top:45px;">
                    <span class="d-block">RFC: <b><t t-esc="o.l10n_mx_edi_cfdi_customer_rfc" /></b></span>
                    <span class="d-block">FORMA DE PAGO: <b><t
                            t-esc="o.l10n_mx_edi_payment_method_id.name"
                        /></b></span>
                    <span class="d-block">METODO DE PAGO: <b><t t-esc="o.l10n_mx_edi_payment_policy" /></b></span>
                    <span class="d-block">USO DE CFDI: <b><t
                            t-esc="o._fields['l10n_mx_edi_usage'].convert_to_export(o.l10n_mx_edi_usage, o)"
                        /></b></span>
                    <span class="d-block">UUID RELACIONADO Y TIPO DE RELACION: <b><t
                            t-esc="o.l10n_mx_edi_cfdi_origin"
                        /></b></span>
                    <span class="d-block"> FACTURAS RECTIFICATIVAS: <b>
                            <t
                                t-esc="dict(o._fields['rectified_invoices']._description_selection(o.env)).get(o.rectified_invoices)" />
                        </b>
                    </span>

                </div>
        </xpath>

        <xpath expr="//th[@name='th_uom']" position="after">
            <th name="th_sat" class="text-center">
                <span>CLAVE SAT</span>
            </th>
        </xpath>
        <xpath expr="//td[@name='td_uom']" position="after">
            <td name="td_sat" class="text-center">
                <span t-field="line.product_id.unspsc_code_id.code" />
            </td>
        </xpath>

        <xpath expr="//strong[@name='tarimas_text']" position="replace" />

        <xpath expr="//div[@name='signature_section']" position="replace" />

    </template>

    <template id="report_invoice_credit_memo_real_3">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.basic_layout">
                    <t
                        t-call="report_account_invoice_real.report_invoice_credit_memo_real_2"
                        t-lang="o.partner_id.lang"
                    />
                </t>
            </t>
        </t>
    </template>

    <template id="report_invoice_credit_memo_real">
        <t t-call="report_account_invoice_real.report_invoice_credit_memo_real_3" />
    </template>
</odoo>
