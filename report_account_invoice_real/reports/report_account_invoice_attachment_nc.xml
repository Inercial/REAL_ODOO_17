<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <template
        id="report_account_invoice_attachment_nc_real_1"
        inherit_id="report_account_invoice_real.report_account_invoice_base_real"
        primary="True"
    />

    <template
        id="report_account_invoice_attachment_nc_real_2"
        inherit_id="report_account_invoice_real.report_account_invoice_attachment_nc_real_1"
        priority="1000"
    >
        <xpath expr="//strong[@name='invoice_title_type']" position="replace">
            <strong style="font-size:1rem;">A-036</strong><br />
            <strong
                name="invoice_title_type"
                style="font-size:0.90rem;border-bottom: 2px solid black;"
            >NOTA DE CRÉDITO - ANEXO</strong>
        </xpath>

        <xpath expr="//strong[@name='L-002']" position="replace" />

        <xpath expr="//span[@name='UUID_origin']" position="replace" />
        <xpath expr="//div[@name='header_right_col']/br[5]" position="replace" />

        <xpath expr="//span[@name='invoice_type']" position="replace">
            <span name="invoice_type">TIPO DE COMPROBANTE: EGRESO</span>
        </xpath>

        <xpath expr="//strong[@name='invoice_date_due']" position="replace" />

        <xpath expr="//div[@name='fiscal_information']" position="replace">
            <div name="client_information" class="col-6" style="font-size:0.90rem; margin-top:45px;">
                    <strong style="border-bottom: 2px solid black;">DATOS DEL CLIENTE</strong>
                    <span class="d-block">NOMBRE DEL CLIENTE: <b><t t-esc="o.partner_id.name" /></b></span>
                    <span class="d-block">NOMBRE DE LA SUCURSAL: <b><t t-esc="o.partner_shipping_id.name" /></b></span>
                    <span class="d-block">TIPO DE NOTA DE CRÉDITO: <b><t t-esc="'falta'" /></b></span>
                    <span class="d-block">ASESOR DE VENTAS <b><t t-esc="o.invoice_user_id.name" /></b></span>
                    <span class="d-block">VIA DE EMBARQUE: <b><t t-esc="o.way_of_shipment_id.name" /></b></span>
                </div>
        </xpath>

        <xpath expr="//div[@name='delivery_information']" position="replace">
            <div name="delivery_information" class="col-6 d-grid" style="font-size:0.90rem; margin-top:45px;">
                    <span class="d-block text-end pe-5 pt-5">RFC: <b><t
                            t-esc="o.l10n_mx_edi_cfdi_customer_rfc"
                        /></b></span>
                </div>
        </xpath>

        <xpath expr="//th[@name='th_uom']" position="after">
            <th name="th_sat" class="text-center">
                <span>CLAVE SAT</span>
            </th>
        </xpath>
        <xpath expr="//td[@name='td_uom']" position="after">
            <td name="td_sat" class="text-center">
                <span t-field="line.product_id.unspsc_code_id.code" />
            </td>
        </xpath>
        <xpath expr="//th[@name='th_tons']" position="replace">
            <th name="th_tons" class="text-center" t-if="o.move_type in ['out_invoice', 'out_refund']">
                <span>TON</span>
            </th>
        </xpath>

        <xpath expr="//th[@name='th_price_unit']" position="replace" />
        <xpath expr="//td[@name='td_price_unit']" position="replace" />

        <xpath expr="//th[@name='th_subtotal']" position="replace" />
        <xpath expr="//td[@name='td_subtotal']" position="replace" />

        <xpath expr="//th[@name='th_tons']" position="after">
            <th class="text-center" t-if="o.move_type in ['out_invoice', 'out_refund']">
                <span>ALM.GENERAL</span>
            </th>
            <th class="text-center" t-if="o.move_type in ['out_invoice', 'out_refund']">
                <span>NO CONFORME</span>
            </th>
            <th class="text-center" t-if="o.move_type in ['out_invoice', 'out_refund']">
                <span>DESECHO</span>
            </th>
        </xpath>

        <xpath expr="//td[@name='td_tons']" position="after">
            <td class="text-center">
                <span t-esc="'    '" />
            </td>
            <td class="text-center">
                <span t-esc="'    '" />
            </td>
            <td class="text-center">
                <span t-esc="'    '" />
            </td>

        </xpath>

        <xpath expr="//div[@name='table_totals']" position="replace" />

        <xpath expr="//strong[@name='tarimas_text']" position="replace" />

        <xpath expr="//div[@name='total_amount_text']" position="replace" />

        <xpath expr="//div[@name='limit_date']" position="replace" />
        <xpath expr="//div[@name='bank_payments_info']" position="replace" />
        <xpath expr="//div[@name='CFDI_information']" position="replace" />

        <xpath expr="//div[@name='signature_section']" position="replace">
            <div class="mt-5" style="font-size:18px">
                <span>COMPLEMENTO</span><br />
                <span>NOTA: ANEXO CO-004 AUTORIZACIÓN DE DEVOLUCIONES</span>
            </div>
            <div class="row mt-5 pt-5">
                <div class="col-4" />

                <div class="col-5 ms-3 pt-5" style="font-size:12px;">
                    <div style="border-top:1px dotted #000;" class="text-center">
                        <span>DISEÑO Y DESARROLLO</span>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template id="report_account_invoice_attachment_nc_real_3">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.basic_layout">
                    <t
                        t-call="report_account_invoice_real.report_account_invoice_attachment_nc_real_2"
                        t-lang="o.partner_id.lang"
                    />
                </t>
            </t>
        </t>
    </template>

    <template id="report_account_invoice_attachment_nc_real">
        <t t-call="report_account_invoice_real.report_account_invoice_attachment_nc_real_3" />
    </template>
</odoo>
